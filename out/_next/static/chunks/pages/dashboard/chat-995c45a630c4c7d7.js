(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5706],{23926:function(e,r,t){"use strict";var n=t(67294),i=t(30067),o=t(73633),a=t(57094),s=t(85893);function $(e){return e.substring(2).toLowerCase()}r.Z=function(e){let{children:r,disableReactTree:t=!1,mouseEvent:c="onClick",onClickAway:l,touchEvent:d="onTouchEnd"}=e,u=n.useRef(!1),_=n.useRef(null),h=n.useRef(!1),x=n.useRef(!1);n.useEffect(()=>(setTimeout(()=>{h.current=!0},0),()=>{h.current=!1}),[]);let p=(0,i.Z)(r.ref,_),f=(0,o.Z)(e=>{var r,n;let i=x.current;x.current=!1;let o=(0,a.Z)(_.current);if(!h.current||!_.current||"clientX"in e&&(r=e,(n=o).documentElement.clientWidth<r.clientX||n.documentElement.clientHeight<r.clientY))return;if(u.current){u.current=!1;return}let s;(e.composedPath?e.composedPath().indexOf(_.current)>-1:!o.documentElement.contains(e.target)||_.current.contains(e.target))||!t&&i||l(e)}),v=e=>t=>{x.current=!0;let n=r.props[e];n&&n(t)},m={ref:p};return!1!==d&&(m[d]=v(d)),n.useEffect(()=>{if(!1!==d){let e=$(d),r=(0,a.Z)(_.current),t=()=>{u.current=!0};return r.addEventListener(e,f),r.addEventListener("touchmove",t),()=>{r.removeEventListener(e,f),r.removeEventListener("touchmove",t)}}},[f,d]),!1!==c&&(m[c]=v(c)),n.useEffect(()=>{if(!1!==c){let e=$(c),r=(0,a.Z)(_.current);return r.addEventListener(e,f),()=>{r.removeEventListener(e,f)}}},[f,c]),(0,s.jsx)(n.Fragment,{children:n.cloneElement(r,m)})}},54209:function(e,r,t){"use strict";t.d(r,{Z:function(){return b}});var n=t(63366),i=t(87462),o=t(67294);t(59864);var a=t(86010),s=t(94780),$=t(81719),c=t(78884),l=t(79354),d=t(72347),u=t(34867),_=t(1588);function h(e){return(0,u.Z)("MuiAvatarGroup",e)}let x=(0,_.Z)("MuiAvatarGroup",["root","avatar"]);var p=x,f=t(85893);let v=["children","className","component","componentsProps","max","spacing","total","variant"],m={small:-16,medium:null},Z=e=>{let{classes:r}=e;return(0,s.Z)({root:["root"],avatar:["avatar"]},h,r)},j=(0,$.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,r)=>(0,i.Z)({[`& .${p.avatar}`]:r.avatar},r.root)})(({theme:e})=>({[`& .${l.Z.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"})),g=(0,$.ZP)(d.Z,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})(({theme:e})=>({border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})),y=o.forwardRef(function(e,r){var t,s;let $=(0,c.Z)({props:e,name:"MuiAvatarGroup"}),{children:l,className:d,component:u="div",componentsProps:_={},max:h=5,spacing:x="medium",total:p,variant:y="circular"}=$,b=(0,n.Z)($,v),w=h<2?2:h,C=(0,i.Z)({},$,{max:h,spacing:x,component:u,variant:y}),S=Z(C),k=o.Children.toArray(l).filter(e=>o.isValidElement(e)),R=p||k.length;R===w&&(w+=1),w=Math.min(R+1,w);let M=Math.min(k.length,w-1),A=Math.max(R-w,R-M,0),z=x&&void 0!==m[x]?m[x]:-x;return(0,f.jsxs)(j,(0,i.Z)({as:u,ownerState:C,className:(0,a.Z)(S.root,d),ref:r},b,{children:[A?(0,f.jsxs)(g,(0,i.Z)({ownerState:C,variant:y},_.additionalAvatar,{className:(0,a.Z)(S.avatar,null==(t=_.additionalAvatar)?void 0:t.className),style:(0,i.Z)({marginLeft:z},null==(s=_.additionalAvatar)?void 0:s.style),children:["+",A]})):null,k.slice(0,M).reverse().map((e,r)=>o.cloneElement(e,{className:(0,a.Z)(e.props.className,S.avatar),style:(0,i.Z)({marginLeft:r===M-1?void 0:z},e.props.style),variant:e.props.variant||y}))]}))});var b=y},69647:function(e,r,t){"use strict";t.d(r,{Z:function(){return Z}});var n=t(63366),i=t(87462),o=t(67294),a=t(86010),s=t(94780),$=t(78884),c=t(81719),l=t(34867),d=t(1588);function u(e){return(0,l.Z)("MuiCardMedia",e)}(0,d.Z)("MuiCardMedia",["root","media","img"]);var _=t(85893);let h=["children","className","component","image","src","style"],x=e=>{let{classes:r,isMediaComponent:t,isImageComponent:n}=e;return(0,s.Z)({root:["root",t&&"media",n&&"img"]},u,r)},p=(0,c.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver(e,r){let{ownerState:t}=e,{isMediaComponent:n,isImageComponent:i}=t;return[r.root,n&&r.media,i&&r.img]}})(({ownerState:e})=>(0,i.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),f=["video","audio","picture","iframe","img"],v=["picture","img"],m=o.forwardRef(function(e,r){let t=(0,$.Z)({props:e,name:"MuiCardMedia"}),{children:o,className:s,component:c="div",image:l,src:d,style:u}=t,m=(0,n.Z)(t,h),Z=-1!==f.indexOf(c),j=!Z&&l?(0,i.Z)({backgroundImage:`url("${l}")`},u):u,g=(0,i.Z)({},t,{component:c,isMediaComponent:Z,isImageComponent:-1!==v.indexOf(c)}),y=x(g);return(0,_.jsx)(p,(0,i.Z)({className:(0,a.Z)(y.root,s),as:c,role:!Z&&l?"img":void 0,ref:r,style:j,ownerState:g,src:Z?l||d:void 0},m,{children:o}))});var Z=m},49837:function(e,r,t){"use strict";t.d(r,{Z:function(){return m}});var n=t(87462),i=t(63366),o=t(67294),a=t(86010),s=t(94780),$=t(81719),c=t(78884),l=t(70918),d=t(34867),u=t(1588);function _(e){return(0,d.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var h=t(85893);let x=["className","raised"],p=e=>{let{classes:r}=e;return(0,s.Z)({root:["root"]},_,r)},f=(0,$.ZP)(l.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({overflow:"hidden"})),v=o.forwardRef(function(e,r){let t=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:s=!1}=t,$=(0,i.Z)(t,x),l=(0,n.Z)({},t,{raised:s}),d=p(l);return(0,h.jsx)(f,(0,n.Z)({className:(0,a.Z)(d.root,o),elevation:s?8:void 0,ref:r,ownerState:l},$))});var m=v},88157:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/chat",function(){return t(21714)}])},13988:function(e,r,t){"use strict";t.d(r,{X:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,n.jsx)("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}),"Archive")},88608:function(e,r,t){"use strict";t.d(r,{B:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})}),"DotsHorizontal")},61030:function(e,r,t){"use strict";t.d(r,{j:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 7a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 13a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"MenuAlt4")},99335:function(e,r,t){"use strict";t.d(r,{$:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),"PaperAirplane")},49436:function(e,r,t){"use strict";t.d(r,{F:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),"PaperClip")},73907:function(e,r,t){"use strict";t.d(r,{D:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Photograph")},21392:function(e,r,t){"use strict";t.d(r,{v:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Plus")},13127:function(e,r,t){"use strict";t.d(r,{r:function(){return i}});var n=t(85893),i=(0,t(54235).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Trash")},21714:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return eR}});var n=t(14924),i=t(26042),o=t(85893),a=t(67294),s=t(9008),$=t.n(s),c=t(11163),l=t(61225),d=t(61953),u=t(80562),_=t(72347),h=t(29630),x=t(81719),p=t(98875),f=t(64527),v=t(47568),m=t(69396),Z=t(29815),j=t(70655),g=t(44373),y=t(66605),b=t(31486),w=t(99534),C=t(45697),S=t.n(C),k=t(67836),R=t(9041),M=t(21448),A=t(23926),z=t(58402),P=t(70918),T=t(85214),I=t(80748),E=t(19594),B=t(61702),H=t(50506),L=t(97169),W=t(34547),G=function(e,r){var t=r.reduce(function(e,r){return(0,Z.Z)(e).concat([r.id])},[]);return e.filter(function(e){return!t.includes(e.id)})},F=function(e){var r,t=e.onAddRecipient,n=e.onRemoveRecipient,s=e.recipients,$=(0,w.Z)(e,["onAddRecipient","onRemoveRecipient","recipients"]),c=(0,a.useRef)(null),l=(0,a.useState)(""),u=l[0],x=l[1],p=(0,a.useState)(!0),f=p[0],Z=p[1],g=(0,a.useState)([]),y=g[0],b=g[1],C=u&&f,S=G(y,s),F=(r=(0,v.Z)(function(e){var r,t,n,i;return(0,j.__generator)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,4,,5]),x(r=e.target.value),!r)return[3,2];return n={},[4,H.x.getContacts((n.query=r,n))];case 1:return b(t=o.sent()),[3,3];case 2:b([]),o.label=3;case 3:return[3,5];case 4:return i=o.sent(),console.error(i),[3,5];case 5:return[2]}})}),function(e){return r.apply(this,arguments)}),N=function(){C||Z(!1)},q=function(){Z(!0)},D=function(){Z(!1)},V=function(e){x(""),t&&t(e)},X=function(e){n&&n(e)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,(0,m.Z)((0,i.Z)({sx:{borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1}},$),{children:(0,o.jsx)(W.L,{children:(0,o.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,o.jsx)(d.Z,{ref:c,sx:{alignItems:"center",display:"flex",mr:1,"& .MuiInputBase-root":{backgroundColor:"background.paper",height:40,minWidth:260}},children:(0,o.jsx)(k.Z,{fullWidth:!0,onBlur:N,onChange:F,onFocus:q,placeholder:"Search contacts",InputProps:{startAdornment:(0,o.jsx)(R.Z,{position:"start",children:(0,o.jsx)(L.o,{fontSize:"small"})})},value:u})}),(0,o.jsx)(h.Z,{color:"textSecondary",sx:{mr:2},variant:"body2",children:"To:"}),s.reverse().map(function(e){return(0,o.jsx)(M.Z,{avatar:(0,o.jsx)(_.Z,{src:e.avatar}),label:e.name,onDelete:function(){return X(e.id)},sx:{mr:2}},e.id)})]})})})),C&&(0,o.jsx)(A.Z,{onClickAway:D,children:(0,o.jsx)(z.Z,{anchorEl:null==c?void 0:c.current,open:f,placement:"bottom-start",children:(0,o.jsx)(P.Z,{elevation:16,sx:{borderColor:"divider",borderStyle:"solid",borderWidth:1,maxWidth:"100%",mt:1,width:320},children:0===S.length?(0,o.jsxs)(d.Z,{sx:{p:2,textAlign:"center"},children:[(0,o.jsx)(h.Z,{gutterBottom:!0,variant:"h6",children:"Nothing Found"}),(0,o.jsxs)(h.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",u,'". Try checking for typos or using complete words.']})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{sx:{px:2,pt:2},children:(0,o.jsx)(h.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"})}),(0,o.jsx)(T.Z,{children:S.map(function(e){return(0,o.jsxs)(I.ZP,{button:!0,onClick:function(){return V(e)},children:[(0,o.jsx)(E.Z,{children:(0,o.jsx)(_.Z,{src:e.avatar})}),(0,o.jsx)(B.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)})})]})})})})]})};F.propTypes={onAddRecipient:S().func,onRemoveRecipient:S().func,recipients:S().array},F.defaultProps={recipients:[]};var N=t(72389),q=t(99335),D=t(73907),V=t(49436),X=function(e){var r=e.disabled,t=e.onSend,n=(0,w.Z)(e,["disabled","onSend"]),s=(0,a.useRef)(null),$=(0,a.useState)(""),c=$[0],l=$[1],h=function(){var e;null===(e=s.current)||void 0===e||e.click()},x=function(e){l(e.target.value)},p=function(){c&&(null==t||t(c),l(""))},f=function(e){"Enter"===e.code&&p()};return(0,o.jsxs)(d.Z,(0,m.Z)((0,i.Z)({sx:{alignItems:"center",backgroundColor:"background.paper",display:"flex",flexShrink:0,p:3}},n),{children:[(0,o.jsx)(_.Z,{sx:{display:{xs:"none",sm:"inline"},mr:2},src:"/static/mock-images/avatars/avatar-anika_visser.png"}),(0,o.jsx)(k.Z,{disabled:r,fullWidth:!0,onChange:x,onKeyUp:f,placeholder:"Leave a message",value:c,size:"small"}),(0,o.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex",m:-2,ml:2},children:[(0,o.jsx)(N.Z,{title:"Send",children:(0,o.jsx)(d.Z,{sx:{m:1},children:(0,o.jsx)(u.Z,{color:"primary",disabled:!c||r,sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}},onClick:p,children:(0,o.jsx)(q.$,{fontSize:"small"})})})}),(0,o.jsx)(N.Z,{title:"Attach photo",children:(0,o.jsx)(d.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,o.jsx)(u.Z,{disabled:r,edge:"end",onClick:h,children:(0,o.jsx)(D.D,{fontSize:"small"})})})}),(0,o.jsx)(N.Z,{title:"Attach file",children:(0,o.jsx)(d.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,o.jsx)(u.Z,{disabled:r,edge:"end",onClick:h,children:(0,o.jsx)(V.F,{fontSize:"small"})})})})]}),(0,o.jsx)("input",{hidden:!0,ref:s,type:"file"})]}))};X.propTypes={disabled:S().bool,onSend:S().func},X.defaultProps={disabled:!1};var K=function(e){var r,t=(0,y.I0)(),n=(0,c.useRouter)(),s=(0,a.useState)([]),$=s[0],l=s[1],u=function(e){l(function(r){return r.find(function(r){return r.id===e.id})?$:(0,Z.Z)($).concat([e])})},_=function(e){l(function(r){return r.filter(function(r){return r.id!==e})})},h=(r=(0,v.Z)(function(e){var r,i,o;return(0,j.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),i={},[4,t((0,b.Hz)((i.recipientIds=$.map(function(e){return e.id}),i.body=e,i)))];case 1:return r=a.sent(),n.push("/dashboard/chat?threadKey=".concat(r)).catch(console.error),[3,3];case 2:return o=a.sent(),console.error(o),[3,3];case 3:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,o.jsxs)(d.Z,(0,m.Z)((0,i.Z)({sx:{display:"flex",flexDirection:"column",flexGrow:1}},e),{children:[(0,o.jsx)(F,{onAddRecipient:u,onRemoveRecipient:_,recipients:$}),(0,o.jsx)(d.Z,{sx:{backgroundColor:"background.default",flexGrow:1}}),(0,o.jsx)(g.Z,{}),(0,o.jsx)(X,{disabled:0===$.length,onSend:h})]}))},O=t(41664),Y=t.n(O),U=t(64631),J=t(54225),Q=t(21392),ee=t(21016),er=t(37250),et=(0,a.forwardRef)(function(e,r){var t=e.isFocused,n=e.onChange,a=e.onClickAway,s=e.onFocus,$=e.onSelect,c=e.query,l=e.results,u=(0,w.Z)(e,["isFocused","onChange","onClickAway","onFocus","onSelect","query","results"]),x=c&&t,p=function(e){$&&$(e)};return(0,o.jsx)(A.Z,{onClickAway:function(){return null==a?void 0:a()},children:(0,o.jsxs)(d.Z,(0,m.Z)((0,i.Z)({ref:r,sx:{p:2}},u),{children:[(0,o.jsx)(k.Z,{fullWidth:!0,onChange:n,onFocus:s,placeholder:"Search contacts",InputProps:{startAdornment:(0,o.jsx)(R.Z,{position:"start",children:(0,o.jsx)(L.o,{fontSize:"small"})})},value:c}),Boolean(t&&!c)&&(0,o.jsx)(d.Z,{sx:{py:2},children:(0,o.jsx)(er.C,{message:"Enter a contact name"})}),Boolean(x&&0===l.length)&&(0,o.jsx)(d.Z,{sx:{py:2},children:(0,o.jsxs)(h.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",c,'". Try checking for typos or using complete words.']})}),x&&l.length>0&&(0,o.jsxs)(d.Z,{sx:{py:2},children:[(0,o.jsx)(h.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"}),(0,o.jsx)(T.Z,{children:l.map(function(e){return(0,o.jsxs)(I.ZP,{button:!0,onClick:function(){return p(e)},children:[(0,o.jsx)(E.Z,{children:(0,o.jsx)(_.Z,{src:e.avatar,sx:{height:32,width:32}})}),(0,o.jsx)(B.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)})})]})]}))})});et.propTypes={isFocused:S().bool,onChange:S().func,onClickAway:S().func,onFocus:S().func,onSelect:S().func,query:S().string,results:S().array.isRequired},et.defaultProps={isFocused:!1,query:"",results:[]};var en=t(12195),ei=t(35077),eo=t(54209),ea={lessThanXSeconds:"{{count}}s",xSeconds:"{{count}}s",halfAMinute:"30s",lessThanXMinutes:"{{count}}m",xMinutes:"{{count}}m",aboutXHours:"{{count}}h",xHours:"{{count}}h",xDays:"{{count}}d",aboutXWeeks:"{{count}}w",xWeeks:"{{count}}w",aboutXMonths:"{{count}}m",xMonths:"{{count}}m",aboutXYears:"{{count}}y",xYears:"{{count}}y",overXYears:"{{count}}y",almostXYears:"{{count}}y"},es=(0,m.Z)((0,i.Z)({},ei.Z),{formatDistance:function(e,r,t){t=t||{};var n=ea[e].replace("{{count}}",r);return t.addSuffix?t.comparison>0?"in "+n:n+" ago":n}}),e$=function(e){var r=e.active,t=e.thread,n=e.onSelect,a=(0,w.Z)(e,["active","thread","onSelect"]),s={id:"5e86809283e28b96d2d38537"},$=t.participants.filter(function(e){return e.id!==s.id}),c=t.messages[t.messages.length-1],l=$.reduce(function(e,r){return(0,Z.Z)(e).concat([r.name])},[]).join(", "),u="";if(c){var x=c.authorId===s.id?"Me: ":"",p="image"===c.contentType?"Sent a photo":c.body;u="".concat(x).concat(p)}return(0,o.jsxs)(I.ZP,(0,m.Z)((0,i.Z)({disableGutters:!0,disablePadding:!0,divider:!0,onClick:n,sx:(0,m.Z)((0,i.Z)({},r&&{backgroundColor:"action.selected"}),{cursor:"pointer",overflow:"hidden",px:2,py:3})},a),{children:[(0,o.jsx)(E.Z,{sx:{display:"flex",justifyContent:{sm:"flex-start",xs:"center"}},children:(0,o.jsx)(eo.Z,{max:2,sx:{"& .MuiAvatar-root":$.length>1?{height:26,width:26,"&:nth-of-type(2)":{mt:"10px"}}:{height:36,width:36}},children:$.map(function(e){return(0,o.jsx)(_.Z,{src:e.avatar||void 0},e.id)})})}),(0,o.jsxs)(d.Z,{sx:{flexGrow:1,mr:2,overflow:"hidden"},children:[(0,o.jsx)(h.Z,{noWrap:!0,variant:"subtitle2",children:l}),(0,o.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex"},children:[Boolean(t.unreadCount&&t.unreadCount>0)&&(0,o.jsx)(d.Z,{sx:{backgroundColor:"primary.main",borderRadius:"50%",height:8,mr:1,width:8}}),(0,o.jsx)(h.Z,{color:"textSecondary",noWrap:!0,sx:{flexGrow:1},variant:"subtitle2",children:u})]})]}),(0,o.jsx)(h.Z,{color:"textSecondary",sx:{whiteSpace:"nowrap"},variant:"caption",children:(0,en.Z)(c.createdAt,new Date,{addSuffix:!1,locale:es})})]}))};e$.propTypes={active:S().bool,onSelect:S().func,thread:S().object.isRequired},e$.defaultProps={active:!1};var ec=(0,x.ZP)(U.ZP)({flexShrink:0,width:380,"& .MuiDrawer-paper":{position:"relative",width:380}}),el=(0,x.ZP)(U.ZP)({maxWidth:"100%",width:380,"& .MuiDrawer-paper":{height:"calc(100% - 64px)",maxWidth:"100%",top:64,width:380}}),ed=function(e){var r,t=e.containerRef,n=e.onClose,s=e.open,$=(0,w.Z)(e,["containerRef","onClose","open"]),_=(0,c.useRouter)(),x=(0,y.v9)(function(e){return e.chat}),p=x.threads,f=x.activeThreadId,Z=(0,a.useState)(!1),g=Z[0],b=Z[1],C=(0,a.useState)(""),S=C[0],k=C[1],R=(0,a.useState)([]),M=R[0],A=R[1],z=(0,l.Z)(function(e){return e.breakpoints.up("md")}),P=function(){z||null==n||n()},I=function(){b(!1),k("")},E=(r=(0,v.Z)(function(e){var r,t,n,i;return(0,j.__generator)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,4,,5]),k(r=e.target.value),!r)return[3,2];return n={},[4,H.x.getContacts((n.query=r,n))];case 1:return A(t=o.sent()),[3,3];case 2:A([]),o.label=3;case 3:return[3,5];case 4:return i=o.sent(),console.error(i),[3,5];case 5:return[2]}})}),function(e){return r.apply(this,arguments)}),B=function(){b(!0)},L=function(e){b(!1),k(""),z||null==n||n(),_.push("/dashboard/chat?threadKey=".concat(e.id)).catch(console.error)},G=function(e){var r,t=p.byId[e];r="GROUP"===t.type?t.id:t.participantIds.find(function(e){return"5e86809283e28b96d2d38537"!==e}),z||null==n||n(),_.push("/dashboard/chat?threadKey=".concat(r)).catch(console.error)},F=(0,o.jsxs)("div",{children:[(0,o.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,o.jsx)(h.Z,{variant:"h5",children:"Chats"}),(0,o.jsx)(d.Z,{sx:{flexGrow:1}}),(0,o.jsx)(Y(),{href:"/dashboard/chat?compose=true",passHref:!0,children:(0,o.jsx)(J.Z,{component:"a",onClick:P,startIcon:(0,o.jsx)(Q.v,{}),variant:"contained",children:"Group"})}),(0,o.jsx)(u.Z,{onClick:n,sx:{display:{sm:"none"},ml:2},children:(0,o.jsx)(ee.X,{fontSize:"small"})})]}),(0,o.jsx)(et,{isFocused:g,onChange:E,onClickAway:I,onFocus:B,onSelect:L,query:S,results:M}),(0,o.jsx)(d.Z,{sx:{borderTopColor:"divider",borderTopStyle:"solid",borderTopWidth:1,display:g?"none":"block"},children:(0,o.jsx)(W.L,{children:(0,o.jsx)(T.Z,{disablePadding:!0,children:p.allIds.map(function(e){return(0,o.jsx)(e$,{active:f===e,onSelect:function(){return G(e)},thread:p.byId[e]},e)})})})})]});return z?(0,o.jsx)(ec,(0,m.Z)((0,i.Z)({anchor:"left",open:s,SlideProps:{container:null==t?void 0:t.current},variant:"persistent"},$),{children:F})):(0,o.jsx)(el,(0,m.Z)((0,i.Z)({anchor:"left",ModalProps:{container:null==t?void 0:t.current},onClose:n,open:s,SlideProps:{container:null==t?void 0:t.current},variant:"temporary"},$),{children:F}))};ed.propTypes={containerRef:S().any,onClose:S().func,open:S().bool};var eu=t(44086),e_=t(49837),eh=t(68346),ex=t(69647),ep=function(e){var r=e.body,t=e.contentType,n=e.createdAt,s=e.authorAvatar,$=e.authorName,c=e.authorType,l=(0,w.Z)(e,["body","contentType","createdAt","authorAvatar","authorName","authorType"]),u=(0,a.useState)(!1),x=(u[0],u[1]);return(0,o.jsxs)(d.Z,(0,m.Z)((0,i.Z)({sx:{display:"flex",flexDirection:"user"===c?"row-reverse":"row",maxWidth:500,ml:"user"===c?"auto":0,mb:2}},l),{children:[(0,o.jsx)(_.Z,{src:s||void 0,sx:{height:32,ml:"user"===c?2:0,mr:"user"===c?0:2,width:32}}),(0,o.jsxs)(d.Z,{sx:{flexGrow:1},children:[(0,o.jsxs)(e_.Z,{sx:{backgroundColor:"user"===c?"primary.main":"background.paper",color:"user"===c?"primary.contrastText":"text.primary",px:2,py:1},children:[(0,o.jsx)(d.Z,{sx:{mb:1},children:(0,o.jsx)(eh.Z,{color:"inherit",sx:{cursor:"pointer"},variant:"subtitle2",children:$})}),"image"===t?(0,o.jsx)(ex.Z,{onClick:function(){return x(!0)},image:r,sx:{height:200}}):(0,o.jsx)(h.Z,{color:"inherit",variant:"body1",children:r})]}),(0,o.jsx)(d.Z,{sx:{display:"flex",justifyContent:"user"===c?"flex-end":"flex-start",mt:1,px:2},children:(0,o.jsxs)(h.Z,{color:"textSecondary",noWrap:!0,variant:"caption",children:[(0,eu.Z)(n)," ","ago"]})})]})]}))};ep.propTypes={authorAvatar:S().string.isRequired,authorName:S().string.isRequired,authorType:S().oneOf(["contact","user"]).isRequired,body:S().string.isRequired,contentType:S().string.isRequired,createdAt:S().number.isRequired};var ef=function(e){var r=e.messages,t=e.participants,n=(0,w.Z)(e,["messages","participants"]),a={avatar:"/static/mock-images/avatars/avatar-anika_visser.png",name:"Anika Visser"};return(0,o.jsx)(d.Z,(0,m.Z)((0,i.Z)({sx:{p:2}},n),{children:r.map(function(e){var r,n,i,s=t.find(function(r){return r.id===e.authorId});return"5e86809283e28b96d2d38537"===e.authorId?(r=a.avatar,n="Me",i="user"):(r=s.avatar,n=s.name,i="contact"),(0,o.jsx)(ep,{authorAvatar:r,authorName:n,authorType:i,body:e.body,contentType:e.contentType,createdAt:e.createdAt},e.id)})}))};ef.propTypes={messages:S().array,participants:S().array};var e0=t(19117),ev=t(31538),em=t(29894),eZ=t(13988),e1=t(56395),ej=t(54235),eg=(0,ej.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),"Ban"),e6=(0,ej.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Camera"),ey=(0,ej.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),"Phone"),e2=t(88608),e3=t(13127),eb=function(e){var r=e.participants,t=(0,w.Z)(e,["participants"]),n=(0,a.useRef)(null),s=(0,a.useState)(!1),$=s[0],c=s[1],l={id:"5e86809283e28b96d2d38537"},x=r.filter(function(e){return e.id!==l.id}),p=x.reduce(function(e,r){return(0,Z.Z)(e).concat([r.name])},[]).join(", "),f=function(){c(!0)},v=function(){c(!1)};return(0,o.jsxs)(d.Z,(0,m.Z)((0,i.Z)({sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",flexShrink:0,minHeight:64,px:2,py:1}},t),{children:[(0,o.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,o.jsx)(eo.Z,{max:2,sx:(0,i.Z)({},x.length>1&&{"& .MuiAvatar-root":{height:30,width:30,"&:nth-of-type(2)":{mt:"10px"}}}),children:x.map(function(e){return(0,o.jsx)(_.Z,{src:e.avatar||void 0},e.id)})}),(0,o.jsxs)(d.Z,{sx:{ml:2},children:[(0,o.jsx)(h.Z,{variant:"subtitle2",children:p}),Boolean(1===x.length&&x[0].lastActivity)&&(0,o.jsxs)(h.Z,{color:"textSecondary",variant:"caption",children:["Last active"," ",(0,eu.Z)(x[0].lastActivity,{addSuffix:!0})]})]})]}),(0,o.jsx)(d.Z,{sx:{flexGrow:1}}),(0,o.jsx)(u.Z,{children:(0,o.jsx)(ey,{fontSize:"small"})}),(0,o.jsx)(u.Z,{children:(0,o.jsx)(e6,{fontSize:"small"})}),(0,o.jsx)(N.Z,{title:"More options",children:(0,o.jsx)(u.Z,{onClick:f,ref:n,children:(0,o.jsx)(e2.B,{fontSize:"small"})})}),(0,o.jsxs)(e0.Z,{anchorEl:n.current,keepMounted:!0,onClose:v,open:$,children:[(0,o.jsxs)(ev.Z,{children:[(0,o.jsx)(em.Z,{children:(0,o.jsx)(eg,{fontSize:"small"})}),(0,o.jsx)(B.Z,{primary:"Block contact"})]}),(0,o.jsxs)(ev.Z,{children:[(0,o.jsx)(em.Z,{children:(0,o.jsx)(e3.r,{fontSize:"small"})}),(0,o.jsx)(B.Z,{primary:"Delete thread"})]}),(0,o.jsxs)(ev.Z,{children:[(0,o.jsx)(em.Z,{children:(0,o.jsx)(eZ.X,{fontSize:"small"})}),(0,o.jsx)(B.Z,{primary:"Archive thread"})]}),(0,o.jsxs)(ev.Z,{children:[(0,o.jsx)(em.Z,{children:(0,o.jsx)(e1.U,{fontSize:"small"})}),(0,o.jsx)(B.Z,{primary:"Mute notifications"})]})]})]}))};eb.propTypes={participants:S().array},eb.defaultProps={participants:[]};var e4=function(e){var r=e.chat,t=r.threads,n=r.activeThreadId;return t.byId[n]},ew=function(e){var r,t,n=e.threadKey,s=(0,y.I0)(),$=(0,c.useRouter)(),l=(0,y.v9)(function(e){return e4(e)}),u=(0,a.useRef)(null),_=(0,a.useState)([]),h=_[0],x=_[1],p={id:"5e86809283e28b96d2d38537"},f=(r=(0,v.Z)(function(){var e,r,t,i,o,a,c;return(0,j.__generator)(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),r={},[4,H.x.getParticipants((r.threadKey=n,r))];case 1:return x(e=l.sent()),i={},[4,s((0,b.bJ)((i.threadKey=n,i)))];case 2:return t=l.sent(),o={},s((0,b.gG)((o.threadId=t,o))),a={},s((0,b.RZ)((a.threadId=t,a))),[3,4];case 3:return c=l.sent(),console.error(c),$.push("/dashboard/chat").catch(console.error),[3,4];case 4:return[2]}})}),function(){return r.apply(this,arguments)});(0,a.useEffect)(function(){f()},[n]),(0,a.useEffect)(function(){(null==l?void 0:l.messages)&&(null==u?void 0:u.current)&&(u.current.getScrollElement().scrollTop=u.current.el.scrollHeight)},[l]);var Z=(t=(0,v.Z)(function(e){var r,t,n,i,o,a,$,c;return(0,j.__generator)(this,function(d){switch(d.label){case 0:if(d.trys.push([0,6,,7]),!l)return[3,2];return r={},[4,s((0,b.Hz)((r.threadId=l.id,r.body=e,r)))];case 1:return d.sent(),[3,5];case 2:return t=h.filter(function(e){return e.id!==p.id}).map(function(e){return e.id}),i={},[4,s((0,b.Hz)((i.recipientIds=t,i.body=e,i)))];case 3:return n=d.sent(),o={},[4,s((0,b.bJ)((o.threadKey=n,o)))];case 4:d.sent(),s((0,b.gG)(n)),d.label=5;case 5:return $={},(null==u?void 0:u.current)&&(a=u.current.getScrollElement()).scrollTo(($.top=u.current.el.scrollHeight,$.behavior="smooth",$)),[3,7];case 6:return c=d.sent(),console.error(c),[3,7];case 7:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,o.jsxs)(d.Z,(0,m.Z)((0,i.Z)({sx:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"}},e),{children:[(0,o.jsx)(eb,{participants:h}),(0,o.jsx)(d.Z,{sx:{backgroundColor:"background.default",flexGrow:1,overflow:"hidden"},children:(0,o.jsx)(W.L,{ref:u,sx:{maxHeight:"100%"},children:(0,o.jsx)(ef,{messages:(null==l?void 0:l.messages)||[],participants:(null==l?void 0:l.participants)||[]})})}),(0,o.jsx)(g.Z,{}),(0,o.jsx)(X,{disabled:!1,onSend:Z})]}))};ew.propTypes={threadKey:S().string.isRequired};var e5=t(34641),e7=t(61030),eC=t(38682),eS=(0,x.ZP)("div",{shouldForwardProp:function(e){return"open"!==e}})(function(e){var r,t,o=e.theme,a=e.open;return(0,i.Z)((r={display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"},(0,n.Z)(r,o.breakpoints.up("md"),{marginLeft:-380}),(0,n.Z)(r,"transition",o.transitions.create("margin",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.leavingScreen})),r),a&&(t={},(0,n.Z)(t,o.breakpoints.up("md"),{marginLeft:0}),(0,n.Z)(t,"transition",o.transitions.create("margin",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.enteringScreen})),t))}),ek=function(){var e=(0,c.useRouter)(),r=(0,y.I0)(),t=(0,a.useRef)(null),n=(0,a.useState)(!0),i=n[0],s=n[1],x="true"===e.query.compose,p=e.query.threadKey,f=(0,l.Z)(function(e){return e.breakpoints.up("md")},{noSsr:!0});(0,a.useEffect)(function(){eC.w.push({event:"page_view"})},[]),(0,a.useEffect)(function(){r((0,b.hr)())},[]),(0,a.useEffect)(function(){f?s(!0):s(!1)},[f]);var v=function(){s(!1)},m=function(){s(function(e){return!e})};if(!e.isReady)return null;var Z=p?"thread":x?"compose":"blank";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($(),{children:(0,o.jsx)("title",{children:"Dashboard: Chat | Material Kit Pro"})}),(0,o.jsx)(d.Z,{component:"main",sx:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},children:(0,o.jsxs)(d.Z,{ref:t,sx:{display:"flex",position:"absolute",top:0,right:0,bottom:0,left:0},children:[(0,o.jsx)(ed,{containerRef:t,onClose:v,open:i}),(0,o.jsxs)(eS,{open:i,children:[(0,o.jsx)(d.Z,{sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",p:2},children:(0,o.jsx)(u.Z,{onClick:m,children:(0,o.jsx)(e7.j,{fontSize:"small"})})}),"thread"===Z&&(0,o.jsx)(ew,{threadKey:p}),"compose"===Z&&(0,o.jsx)(K,{}),"blank"===Z&&(0,o.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,o.jsx)(_.Z,{sx:{backgroundColor:"primary.main",color:"primary.contrastText",height:56,width:56},children:(0,o.jsx)(e5.d,{fontSize:"small"})}),(0,o.jsx)(h.Z,{color:"textSecondary",sx:{mt:2},variant:"subtitle1",children:"Start meaningful conversations!"})]})]})]})})]})};ek.getLayout=function(e){return(0,o.jsx)(p.a,{children:(0,o.jsx)(f.c,{children:e})})};var eR=ek}},function(e){e.O(0,[7760,8576,7836,4054,2251,3837,7998,5720,5354,7413,8848,9774,2888,179],function(){return e(e.s=88157)}),_N_E=e.O()}]);